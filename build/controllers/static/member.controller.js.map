{"version":3,"sources":["../../../src/controllers/static/member.controller.js"],"names":["memberController","req","res","Department","find","then","departments","Fellowship","fellowship","fellowships","Member","populate","members","render","title","body","firstname","lastname","email","phoneno","dob","gender","department","replace","findById","member","phonenumber","save","redirect","err","console","log"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;;;;;IAEMA,gB;;;;;;;;;AACJ;qCACwBC,G,EAAKC,G,EAAK;AAChCC,6BAAWC,IAAX,GACGC,IADH,CACQ,UAAAC,WAAW,EAAI;AACnB,eAAOA,WAAP;AACD,OAHH,EAIGD,IAJH,CAIQ,UAAAC,WAAW,EAAI;AACnBC,+BAAWH,IAAX,GACGC,IADH,CACQ,UAAAG,UAAU,EAAI;AAClB,iBAAOA,UAAP;AACD,SAHH,EAIGH,IAJH,CAIQ,UAAAI,WAAW,EAAI;AACnBC,6BAAON,IAAP,GACGO,QADH,CACY,YADZ,EAEGN,IAFH,CAEQ,UAAAO,OAAO,EAAI;AACfV,YAAAA,GAAG,CAACW,MAAJ,CAAW,kBAAX,EAA+B;AAC7BP,cAAAA,WAAW,EAAEA,WADgB;AAE7BG,cAAAA,WAAW,EAAEA,WAFgB;AAG7BG,cAAAA,OAAO,EAAEA,OAHoB;AAI7BE,cAAAA,KAAK,EAAE;AAJsB,aAA/B;AAMD,WATH;AAUD,SAfH;AAgBD,OArBH;AAsBD;;;+BAEiBb,G,EAAKC,G,EAAK;AAAA,sBAUtBD,GAAG,CAACc,IAVkB;AAAA,UAExBC,SAFwB,aAExBA,SAFwB;AAAA,UAGxBC,QAHwB,aAGxBA,QAHwB;AAAA,UAIxBC,KAJwB,aAIxBA,KAJwB;AAAA,UAKxBC,OALwB,aAKxBA,OALwB;AAAA,UAMxBC,GANwB,aAMxBA,GANwB;AAAA,UAOxBC,MAPwB,aAOxBA,MAPwB;AAAA,UAQxBb,UARwB,aAQxBA,UARwB;AAAA,UASxBc,UATwB,aASxBA,UATwB;AAW1BH,MAAAA,OAAO,GAAGA,OAAO,CAACI,OAAR,CAAgB,IAAhB,EAAsB,EAAtB,CAAV;;AACAhB,6BAAWiB,QAAX,CAAoBhB,UAApB,EACGH,IADH,CACQ,UAAAG,UAAU,EAAI;AAClB,YAAMiB,MAAM,GAAG,IAAIf,kBAAJ,CAAW;AACxBM,UAAAA,SAAS,EAAEA,SADa;AAExBC,UAAAA,QAAQ,EAAEA,QAFc;AAGxBC,UAAAA,KAAK,EAAEA,KAHiB;AAIxBQ,UAAAA,WAAW,EAAEP,OAJW;AAKxBC,UAAAA,GAAG,EAAEA,GALmB;AAMxBC,UAAAA,MAAM,EAAEA,MANgB;AAOxBb,UAAAA,UAAU,EAAEA,UAPY;AAQxBc,UAAAA,UAAU,EAAEA;AARY,SAAX,CAAf;AAUAG,QAAAA,MAAM,CAACE,IAAP;AACAzB,QAAAA,GAAG,CAAC0B,QAAJ,CAAa,gBAAb;AACD,OAdH,WAeS,UAAAC,GAAG,EAAI;AACZC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,OAjBH;AAkBD;;;;;;eAGY7B,gB","sourcesContent":["import Fellowship from \"../../models/fellowship.model\";\nimport Department from \"../../models/department.model\";\nimport Member from \"../../models/member.model\";\n\nclass memberController {\n  //Displats Add Page\n  static getAddMemberPage(req, res) {\n    Department.find()\n      .then(departments => {\n        return departments;\n      })\n      .then(departments => {\n        Fellowship.find()\n          .then(fellowship => {\n            return fellowship;\n          })\n          .then(fellowships => {\n            Member.find()\n              .populate(\"fellowship\")\n              .then(members => {\n                res.render(\"admin/member-add\", {\n                  departments: departments,\n                  fellowships: fellowships,\n                  members: members,\n                  title: \"Member Page\"\n                });\n              });\n          });\n      });\n  }\n\n  static saveMember(req, res) {\n    let {\n      firstname,\n      lastname,\n      email,\n      phoneno,\n      dob,\n      gender,\n      fellowship,\n      department\n    } = req.body;\n    phoneno = phoneno.replace(/-/g, \"\");\n    Fellowship.findById(fellowship)\n      .then(fellowship => {\n        const member = new Member({\n          firstname: firstname,\n          lastname: lastname,\n          email: email,\n          phonenumber: phoneno,\n          dob: dob,\n          gender: gender,\n          fellowship: fellowship,\n          department: department\n        });\n        member.save();\n        res.redirect(\"/admin/members\");\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  }\n}\n\nexport default memberController;\n"],"file":"member.controller.js"}